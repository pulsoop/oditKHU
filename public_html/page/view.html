<html>
<head>
	<title>게시물 보기</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free singlepage web template created by GraphBerry">
	<meta name="keywords" content="HTML5, Bootstrap 3, CSS3, javascript, PHP, Responsive, Mobile">
	<meta name="author" content="GraphBerry.com"/>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<!-- Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,600,600i" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Yeon+Sung&display=swap&subset=korean" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Do+Hyeon|Yeon+Sung&display=swap&subset=korean" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:500|Noto+Serif+KR&display=swap" rel="stylesheet">
	<!-- Style -->
	<link rel="stylesheet" type="text/css" href="../css/view_style.css">
	<!--Let browser know website is optimized for mobile-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

	<body>
		<!-- header -->
		<header id="header">
			
			<!-- Section title -->
			<h1 class="sr-only">Molly | Home page</h1>
			
			<nav id="main-navigation" class="navbar navbar-default navbar-fixed-top">
				<!-- Section title -->
				<h1 class="sr-only">Main navigation</h1>

				<div class="container">
					<!-- Brand and toggle get grouped for better mobile display -->
					<div class="navbar-header">
						<div id="mySidenav" class="sidenav">
							<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
							<a href="./mypage.html">My page</a>
							<a href="./board_lost.html">찾아줘KHU</a>
							<a href="./board_get.html">찾아가KHU</a>
							<a href="./board_cmplt.html">해결했KHU</a>
							<a href="./lostcen.html">분실물센터</a>
						</div>
						<div style="float: left; padding: 35px 0 0 10px;"><span style="font-size:30px;cursor:pointer" onclick="openNav()"><span class="glyphicon glyphicon-menu-hamburger"></span></span> </div>
						<div style="float: right;"><a id="brand-mobile" class="navbar-brand navbar-brand-center smoothScroll" href="#home">
							<img alt="Molly" src="../img/svg/logo.png"></div>	      		
						</a>
					</div>

					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse" id="main-navbar">
						<ul class="nav navbar-nav">
							<li id="brand-desktop">
								<a class="navbar-brand smoothScroll" href="#home">
									<img alt="Molly" src="../img/svg/logo.png">
								</a>
							</li>
						</ul>
					</div><!-- /.navbar-collapse -->
				</div><!-- /.container -->
			</nav>

		</header>

		<!-- 게시물 보기 영역 -->
		<div id="app">
			<div id="title">{{ title }}</div>
			<div id="writer">작성 : </div>
			<div id="writer_text">{{ name }}</div>
			<div id="date">날짜 : </div>
			<div id="date_text">{{ date }}</div>
			<div id="keyword">종류 : </div>
			<div id="keyword_text"></div>
			<div id="location">위치 : </div>
			<div id="location_text"></div>
			<div id="image" >
				<img src="../img/wlqmfl.jpg">
			</div>
			<div id="content">{{ content }}</div>
		</div>

		<!-- 댓글 입력 -->
		<form>
			<div class="form-group">
				<label for="inputEmail4" style="font-family: 'Noto Serif KR', serif;">댓글 입력</label>
				<input type="title" class="form-control" id="title">
			</div>
			<div id="buttons" style="width:50px;">
				<button type="submit" class="btn yellow">댓글 등록</button>
			</div>
		</form>

		<!-- 댓글 보기 -->
		<div id="comment_wrapper">
			<div v-for="comment in comments">
				<div id="com_writer">{{comment.author}}</div>
				<div id="comment">{{comment.content}}</div>
			</div>
		</div>


		<!-- Scripts -->
		<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
		<script type="text/javascript" src="../js/smooth-scroll.min.js"></script>
		<script type="text/javascript" src="../js/modernizr.mq.js"></script>
		<script type="text/javascript" src="../js/mixitup.min.js"></script>
		<script type="text/javascript" src="../js/slick.min.js"></script>
		<script type="text/javascript" src="../js/view_main.js"></script>

		<!-- Latest compiled and minified JavaScript Bootstrap-->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<script src="https://unpkg.com/vue/dist/vue.js"></script>
		
		<!-- Custom JS -->
		<script src="../js/view_app.js"></script>
		<script src="../js/custom.js"></script>
		<script>
			function openNav() {
				document.getElementById("mySidenav").style.width = "250px";
			}

			function closeNav() {
				document.getElementById("mySidenav").style.width = "0";
			}
		</script>

		<script src="https://unpkg.com/vue"></script>
		<script>
			function getParameterByName(name) {
				name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
				var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
					results = regex.exec(location.search);
				return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
			}

			var board = getParameterByName('board');
			var i_id = getParameterByName('id');

			new Vue({
				el: '#app',
				data: {
					title: "",
					name: "",
					date: "",
					content: ""
				},
				created() {
					fetch('/api/boards/getitems/' + i_id)
					.then((response) => {
						if(response.ok) {
						return response.json();
						}
						throw new Error('Network response was not ok');
					})
					.then((json) => {
						this.title = json.title;
						this.content = json.content;
						this.date = json.register_date;
						this.name = json.author_name;
					})
				}
			});

			new Vue({
				el: '#comment_wrapper',
				data: {
					comments: []
				},
				created() {
					fetch('/api/boards/getitems/' + i_id + '/comments')
					.then((response) => {
						if(response.ok) {
						return response.json();
						}
						throw new Error('Network response was not ok');
					})
					.then((json) => {
						for(let temp in json.comments) {
							this.comments.push({
								author: json.comment[temp].author_name,
								comment: json.comment[temp].comment
							});
						}
					})
				}
			});
		</script>
	</body>
	</html>